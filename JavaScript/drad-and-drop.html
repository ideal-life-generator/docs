<html>
<head>
	<title></title>
</head>
<body style="background:black;">


<script type="text/javascript">


	function drag(elementToDrag,event){
		var scroll = getScroll();

			var startX = event.clientX + scroll.x;
			var startY = event.clientY + scroll.y;

			var origX = elementToDrag.offsetLeft;
			var origY = elementToDrag.offsetLeft;

			var deltaX = startX - origX;
			var deltaY = startY - origY;

		if(document.addEventListener){
			document.addEventListener('mousemove',moveHandler,true);
			document.addEventListener('mouseup',upHandler,true);
		}
		else if(document.attachEvent){
			elementToDrag.setCapture(); // перехват события
			elementToDrag.attachEvent('onmousemove',moveHandler);
			elementToDrag.attachEvent('onmouseup',upHandler);
			elementToDrag.attachEvent('onlosecapture',upHandler); // потеря перехвата событий
		}

		if(event.stopPropagation) event.stopPropagation();
		else event.cancleBubble = true;

		if(event.preventDefault) event.preventDefault();
		else event.returnValue = false;

		function moveHandler(e){
			if(!e) e = window.event;

			var scroll = getScroll();

			elementToDrag.style.left = (e.clientX + scroll.x - deltaX) + "px";
			elementToDrag.style.top = (e.clientY + scroll.y - deltaY) + "px";

			if(e.stopPropagation) e.stopPropagation();
			else e.cancleBubble = true;
		};

		function upHandler(e){
			if(!e) e = window.event;

			if(document.removeEventListener){
				document.removeEventListener("mouseup",upHandler, true);
				document.removeEventListener("mousemove",moveHandler,true);
			}
			else if(document.detachEvent){
				elementToDrag.detachEvent("onlosecapture",upHandler);
				elementToDrag.detachEvent("onmouseup",upHandler);
				elementToDrag.detachEvent("onmousemove",moveHandler);
				elementToDrag.releaseCapture();
			}
			if(e.stopPropagation) e.stopPropagation();
			else e.cancleBubble = true;
		};

	};

	function getScroll(){
				if(window.pageXOffset) return { x: window.pageXOffset, y: window.pageYOffset }
				var d = window.document;
					if(d.compatMode == "CSS1Compat")
						return { x: d.documentElement.scrollLeft, y: d.documentElement.scrollTop }
					return { x: d.body.scrollLeft, y: d.body.scrollTop }
			};

</script>

<style type="text/css">
	#white { position:absolute;width:60px;height:60px;border:3px solid white;background:purple; }
</style>

<div id="white" draggable="true" onmousedown="drag(this,event)"></div>

</body>
</html>