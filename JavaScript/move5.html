<!DOCTYPE HTML>
<html>
<meta charset="utf-8">
<body>

<style>

	body {
		margin:0;
		background-image:url(bubles.jpg);
	}

	#move-block {
		width:1100px;
		height:560px;
		position:relative;
		border:3px solid lightyellow;
		margin:46px auto 0;
	}

	.item {
		border:3px solid lightyellow;
		cursor:pointer;
		height:140px;
		width:250px;
		position:absolute;
		top:100px;
	}

	#item1 {
		z-index:10;
		top:160px;
		height:140px;
		width:250px;
		background:url(http://i1.ytimg.com/vi/72RnX9eS2NA/maxresdefault.jpg) 100% 100% / 100% 100%;
	}

	#item2 {
		top:150px;
		width:280px;
		height:160px;
		background:url(http://digi10ve.com/wp-content/uploads/2011/11/bcee-beat-the-system-lp.jpg) 100% 100% / 100% 100%;
	}

	#item3 {
		top:160px;
		height:140px;
		width:250px;
		background:url(http://www.unityrec.de/blog/wp-content/uploads/2012/06/artworks-000024315094-v88y9j-original.jpg) 100% 100% / 100% 100%;
	}

	#item4 {
		top:90px;
		height:140px;
		width:250px;
		background:url(http://p.playserver1.com/ProductImages/6/8/0/7/5/9/9/1/19957086_700x700min_1.jpg) 100% 100% / 100% 100%;
	}

	#item5 {
		top:4px;
		border:0;
		height:140px;
		width:250px;
		background:url(http://i1.ytimg.com/vi/poLA-fZnMpw/maxresdefault.jpg) 100% 100% / 100% 100%;
	}

	#item6 {
		top:4px;
		border:0;
		height:140px;
		width:250px;
		background:url(http://i1.sndcdn.com/artworks-000060101606-0o900e-original.jpg?d53bf9f) 100% 100% / 100% 100%;
	}

	#item7 {
		top:4px;
		border:0;
		height:140px;
		width:250px;
		background:url(http://userserve-ak.last.fm/serve/_/81266017/RAM+Records++Drum++Bass+Annual+2011+cover.jpg) 100% 100% / 100% 100%;
	}

	#item8 {
		top:90px;
		height:140px;
		width:250px;
		background:url(http://www.blogbelieve.com/wp-content/uploads/2013/02/Nu-logic-Morning-Light.jpg) 100% 100% / 100% 100%;
	}

	#console {
		border:2px solid white;
		width:100px;
		height:80px;
		position:absolute;
		right:-123px;
		top:-3px;
		font:bold .9em Arial;
		padding:3px 5px;
		color:white;
	}

</style>

<div id="move-block">
	<div class="item" id="item1"></div>
	<div class="item" id="item2"></div>
	<div class="item" id="item3"></div>
	<div class="item" id="item4"></div>
	<div class="item" id="item5"></div>
	<div class="item" id="item6"></div>
	<div class="item" id="item7"></div>
	<div class="item" id="item8"></div>
</div>

<script type="text/javascript">

var content = document.getElementById('move-block');
var items = Array.prototype.slice.call(document.getElementsByClassName('item'));
var length = items.length;
var sortmap = [{left:141},{left:405},{left:699},{left:963},{left:-123}];
var lastpageX;
var mapelevan = 0;
var countRight = countLeft = true;
var side,lastside,a=0;
var mapelevanlength;
var started = false;

function sort(){
	items[0].style.left = sortmap[0].left + 'px';
	items[1].style.left = sortmap[1].left + 'px';
	items[2].style.left = sortmap[2].left + 'px';
	items[3].style.left = sortmap[3].left + 'px';
	items[items.length-1].style.left = sortmap[4].left + 'px';
	for(var i=4,a=1;i<length-1;i++,a++) items[i].style.left = 130 + a*30 + 'px';
};

sort();

var map = [];
var i = 0; while(items[i]){
				map[i] = {};
				map[i].left = parseInt(items[i++].style.left);	
		   }

document.body.onmousedown = function(down){

var click = down.pageX;

var X0 = parseInt(items[0].style.left);
var X1 = parseInt(items[1].style.left);
var X2 = parseInt(items[2].style.left);
var X3 = parseInt(items[3].style.left);
var X4 = parseInt(items[4].style.left);
var X5 = parseInt(items[5].style.left);
var X6 = parseInt(items[6].style.left);
var X7 = parseInt(items[7].style.left);


	this.onmousemove = function(move){

		if(lastpageX!==move.pageX){

			var Y = move.pageX - click;

			if(lastpageX<move.pageX){
				side = true;
				if(lastside!==side){
					X0 = parseInt(items[0].style.left);
					X1 = parseInt(items[1].style.left);
					X2 = parseInt(items[2].style.left);
					X3 = parseInt(items[3].style.left);
					X4 = parseInt(items[4].style.left);
					X5 = parseInt(items[5].style.left);
					X6 = parseInt(items[6].style.left);
					X7 = parseInt(items[7].style.left);
					click += Y;
					Y = move.pageX - click;
					if(a>1){
						mapelevan++;
					}
				a++;
				}
				if(countRight){
					countRight = false;
					mapelevan++;
				}
				if(Y>150){
					X0 = parseInt(items[0].style.left);
					X1 = parseInt(items[1].style.left);
					X2 = parseInt(items[2].style.left);
					X3 = parseInt(items[3].style.left);
					X4 = parseInt(items[4].style.left);
					X5 = parseInt(items[5].style.left);
					X6 = parseInt(items[6].style.left);
					X7 = parseInt(items[7].style.left);
					countRight = true;
					click += 150;
				}
				mapelevanlength = (length+mapelevan)%length;
				console.log(mapelevanlength);
				var Y0 = map[mapelevanlength].left - X0;
				var Y1 = map[(mapelevanlength+1)%length].left - X1;
				var Y2 = map[(mapelevanlength+2)%length].left - X2;
				var Y3 = map[(mapelevanlength+3)%length].left - X3;
				var Y4 = map[(mapelevanlength+4)%length].left - X4;
				var Y5 = map[(mapelevanlength+5)%length].left - X5;
				var Y6 = map[(mapelevanlength+6)%length].left - X6;
				var Y7 = map[(mapelevanlength+7)%length].left - X7;
				var equal = Math.sin(Y/150*Math.PI/2);
				items[0].style.left = X0 + Y0 * equal + 'px';
				items[1].style.left = X1 + Y1 * equal + 'px';
				items[2].style.left = X2 + Y2 * equal + 'px';
				items[3].style.left = X3 + Y3 * equal + 'px';
				items[4].style.left = X4 + Y4 * equal + 'px';
				items[5].style.left = X5 + Y5 * equal + 'px';
				items[6].style.left = X6 + Y6 * equal + 'px';
				items[7].style.left = X7 + Y7 * equal + 'px';
			}

			if(lastpageX>move.pageX){
				side = false;
				if(lastside!==side){
					X0 = parseInt(items[0].style.left);
					X1 = parseInt(items[1].style.left);
					X2 = parseInt(items[2].style.left);
					X3 = parseInt(items[3].style.left);
					X4 = parseInt(items[4].style.left);
					X5 = parseInt(items[5].style.left);
					X6 = parseInt(items[6].style.left);
					X7 = parseInt(items[7].style.left);
					click += Y;
					Y = move.pageX - click;
					if(a>1){
						mapelevan--;
					}
				a++;
				}
				if(countLeft){
					countLeft = false;
					mapelevan--;
				}
				if(Y<-150){
					X0 = parseInt(items[0].style.left);
					X1 = parseInt(items[1].style.left);
					X2 = parseInt(items[2].style.left);
					X3 = parseInt(items[3].style.left);
					X4 = parseInt(items[4].style.left);
					X5 = parseInt(items[5].style.left);
					X6 = parseInt(items[6].style.left);
					X7 = parseInt(items[7].style.left);
					countLeft = true;
					click -= 150;
				}
				mapelevanlength = (length*10+mapelevan)%length;
				console.log(mapelevanlength);
				var Y0 = map[mapelevanlength].left - X0;
				var Y1 = map[(mapelevanlength+1)%length].left - X1;
				var Y2 = map[(mapelevanlength+2)%length].left - X2;
				var Y3 = map[(mapelevanlength+3)%length].left - X3;
				var Y4 = map[(mapelevanlength+4)%length].left - X4;
				var Y5 = map[(mapelevanlength+5)%length].left - X5;
				var Y6 = map[(mapelevanlength+6)%length].left - X6;
				var Y7 = map[(mapelevanlength+7)%length].left - X7;
				var equal = Math.sin((150-(150+Y))/150*Math.PI/2);
				items[0].style.left = X0 + Y0 * equal + 'px';
				items[1].style.left = X1 + Y1 * equal + 'px';
				items[2].style.left = X2 + Y2 * equal + 'px';
				items[3].style.left = X3 + Y3 * equal + 'px';
				items[4].style.left = X4 + Y4 * equal + 'px';
				items[5].style.left = X5 + Y5 * equal + 'px';
				items[6].style.left = X6 + Y6 * equal + 'px';
				items[7].style.left = X7 + Y7 * equal + 'px';
			}
		
		lastside = side;
		lastpageX = move.pageX;
		}

	move.stopPropagation();
	};

	this.onmouseup = function(up){
		this.onmousemove = undefined;
	up.stopPropagation();
	};

down.stopPropagation();
};

var cont = document.getElementById('console');

function log(text){
	cont.innerHTML = text;
};

</script>

</body>
</html>